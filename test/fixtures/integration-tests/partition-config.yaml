test-suites:
  # buildkite-quarantined-partition-with-config:
  #   command: bash -c 'exit 123'
  #   fail-on-upload-error: true
  #   results:
  #     language: Ruby
  #     framework: RSpec
  #     path: ./fixtures/integration-tests/partition/with-config-buildkite-rspec-failed-not-quarantined.json*
  #   partition:
  #     command: echo "{{ tests }}"
  #     g: 2
  # circleci-quarantined-partition-with-config:
  #   command: bash -c 'exit 123'
  #   fail-on-upload-error: true
  #   results:
  #     language: Ruby
  #     framework: RSpec
  #     path: ./fixtures/integration-tests/partition/with-config-circleci-rspec-failed-not-quarantined.json*
  #   partition:
  #     attempts: 2
  #     command: echo "{{ tests }}"
  # github-actions-quarantined-partition-with-config:
  #   command: bash -c 'exit 123'
  #   fail-on-upload-error: true
  #   results:
  #     language: Ruby
  #     framework: RSpec
  #     path: ./fixtures/integration-tests/partition/with-config-github-actions-rspec-failed-not-quarantined.json*
  #   partition:
  #     attempts: 2
  #     command: echo "{{ tests }}"
  # gitlab-ci-quarantined-partition-with-config:
  #   command: bash -c 'exit 123'
  #   fail-on-upload-error: true
  #   results:
  #     language: Ruby
  #     framework: RSpec
  #     path: ./fixtures/integration-tests/partition/with-config-gitlab-ci-rspec-failed-not-quarantined.json*
  #   partition:
  #     attempts: 2
  #     command: echo "{{ tests }}"
  # generic-quarantined-partition-with-config:
  #   command: bash -c 'exit 123'
  #   fail-on-upload-error: true
  #   results:
  #     language: Ruby
  #     framework: RSpec
  #     path: ./fixtures/integration-tests/partition/with-config-generic-rspec-failed-not-quarantined.json*
  #   partition:
  #     attempts: 2
  #     command: echo "{{ tests }}"
  # inherited-env-quarantined-partition-with-config:
  #   command: bash -c 'exit 123'
  #   fail-on-upload-error: true
  #   results:
  #     language: Ruby
  #     framework: RSpec
  #     path: ./fixtures/integration-tests/partition/with-config-inherited-env-rspec-failed-not-quarantined.json*
  #   partition:
  #     attempts: 2
  #     command: echo "{{ tests }}"
  oss-run-with-partition:
    command: bash -c 'echo "default run" && exit 123'
    fail-on-upload-error: true
    results:
      language: Ruby
      framework: RSpec
      path: ./fixtures/integration-tests/rspec-passed.json
    partition:
      command: echo "test {{ testFiles }}"
      globs:
      - ./fixtures/integration-tests/partition/*.rb

  oss-run-with-partition-with-multiple-globs:
    command: bash -c 'exit 123'
    fail-on-upload-error: true
    results:
      language: Ruby
      framework: RSpec
      path: ./fixtures/integration-tests/rspec-passed.json
    partition:
      command: echo "test {{ testFiles }}"
      globs:
      - ./fixtures/integration-tests/partition/*_spec.rb
      - ./fixtures/integration-tests/partition/*.rb

  oss-run-with-partition-with-custom-delimiter:
    command: bash -c 'exit 123'
    fail-on-upload-error: true
    results:
      language: Ruby
      framework: RSpec
      path: ./fixtures/integration-tests/rspec-passed.json
    partition:
      command: echo "test {{ testFiles }}"
      delimiter: " -hi- "
      globs:
      - ./fixtures/integration-tests/partition/*_spec.rb
      - ./fixtures/integration-tests/partition/*.rb
